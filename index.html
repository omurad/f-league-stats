<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The F-League - Stats Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0f1419;
            color: #e4e6eb;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, #1e2732 0%, #2d3748 100%);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 1.1rem;
            color: #a0aec0;
            margin-bottom: 15px;
        }

        .meta {
            font-size: 0.9rem;
            color: #718096;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: #1a202c;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            border: 1px solid #2d3748;
        }

        .chart-container h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #fff;
            border-bottom: 2px solid #4299e1;
            padding-bottom: 10px;
        }

        .chart-wrapper {
            position: relative;
            height: 400px;
        }

        .player-contributions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            padding: 10px 0;
        }

        .team-card {
            background: #2d3748;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #4a5568;
        }

        .team-card h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #fff;
            border-bottom: 2px solid #4299e1;
            padding-bottom: 8px;
        }

        .player-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            background: #1a202c;
            border-radius: 6px;
            padding: 8px;
            transition: transform 0.2s;
        }

        .player-item:hover {
            transform: translateX(5px);
            background: #2d3748;
        }

        .player-photo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #4299e1;
            margin-right: 12px;
            background: #2d3748;
        }

        .player-photo-error {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
            border: 2px solid #4299e1;
        }

        .player-info {
            flex: 1;
            min-width: 0;
        }

        .player-name {
            font-weight: 600;
            color: #e4e6eb;
            font-size: 0.95rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .player-points {
            color: #4299e1;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .points-bar {
            height: 4px;
            background: #4299e1;
            border-radius: 2px;
            margin-top: 4px;
            transition: width 0.3s ease;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #718096;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
            }

            .chart-wrapper {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>The F-League</h1>
            <p class="subtitle">Fantasy Basketball Stats Dashboard - 2025-2026 Season</p>
            <p class="meta">Last Updated: October 28, 2025 at 11:31 PM -0700</p>
        </header>

        <div class="charts-grid">
            <div class="chart-container full-width">
                <h2>üìà Weekly Total Points</h2>
                <div class="chart-wrapper">
                    <canvas id="weeklyPointsChart"></canvas>
                </div>
            </div>

            <div class="chart-container full-width">
                <h2>üìä Cumulative Total Points</h2>
                <div class="chart-wrapper">
                    <canvas id="cumulativePointsChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìä Standings Progression</h2>
                <div class="chart-wrapper">
                    <canvas id="standingsChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <h2>üìâ Win Margin Distribution</h2>
                <div class="chart-wrapper">
                    <canvas id="marginChart"></canvas>
                </div>
            </div>

            <div class="chart-container full-width">
                <h2>‚≠ê Top Player Contributions by Team (Week 2)</h2>
                <div class="player-contributions-grid" id="playerContributionsGrid"></div>
            </div>
        </div>

        <footer>
            <p>Generated with ESPN API | Data accurate as of October 28, 2025 at 11:31 PM -0700</p>
        </footer>
    </div>

    <script>
        // Embedded data
        const weeklyScoresData = {"weeks": [1, 2], "teams": {"NBA WhiteBoy": [1426.0, 551.0], "Its Not Delivery, Its Dejounte": [1370.0, 631.0], "Duren Duren": [1005.0, 300.0], "APPLYING PASCALS": [1041.0, 335.0], "ALDAMA-LAMA-DINGDONGS": [1146.0, 345.0], "Ay-ton of Drugs ": [1116.0, 459.0], "Anthony Davis": [1024.0, 500.0], "bridges bridges and bridges": [1341.0, 550.0], "Honolulu Kawhi'i": [1011.0, 308.0], "Shai-K47": [1108.0, 624.0]}};
        const cumulativePointsData = {"weeks": [1, 2], "teams": {"NBA WhiteBoy": [1426.0, 1977.0], "Its Not Delivery, Its Dejounte": [1370.0, 2001.0], "Duren Duren": [1005.0, 1305.0], "APPLYING PASCALS": [1041.0, 1376.0], "ALDAMA-LAMA-DINGDONGS": [1146.0, 1491.0], "Ay-ton of Drugs ": [1116.0, 1575.0], "Anthony Davis": [1024.0, 1524.0], "bridges bridges and bridges": [1341.0, 1891.0], "Honolulu Kawhi'i": [1011.0, 1319.0], "Shai-K47": [1108.0, 1732.0]}};
        const standingsData = {"weeks": [1, 2], "teams": {"NBA WhiteBoy": [1, 1], "Its Not Delivery, Its Dejounte": [2, 2], "Duren Duren": [6, 6], "APPLYING PASCALS": [3, 3], "ALDAMA-LAMA-DINGDONGS": [7, 7], "Ay-ton of Drugs ": [8, 8], "Anthony Davis": [9, 9], "bridges bridges and bridges": [4, 4], "Honolulu Kawhi'i": [10, 10], "Shai-K47": [5, 5]}};
        const playerContributions = {"weeks": [1, 2], "contributions": {"1": {"ALDAMA-LAMA-DINGDONGS": [{"name": "Evan Mobley", "points": 132.0, "playerId": 4432158}, {"name": "Norman Powell", "points": 131.0, "playerId": 2595516}, {"name": "Zach LaVine", "points": 112.0, "playerId": 3064440}, {"name": "Brandon Ingram", "points": 107.0, "playerId": 3913176}, {"name": "Cade Cunningham", "points": 107.0, "playerId": 4432166}], "bridges bridges and bridges": [{"name": "Stephen Curry", "points": 188.0, "playerId": 3975}, {"name": "Mikal Bridges", "points": 123.0, "playerId": 3147657}, {"name": "Ausar Thompson", "points": 118.0, "playerId": 4684742}, {"name": "Miles Bridges", "points": 110.0, "playerId": 4066383}, {"name": "Onyeka Okongwu", "points": 108.0, "playerId": 4431680}], "Anthony Davis": [{"name": "Anthony Davis", "points": 151.0, "playerId": 6583}, {"name": "Jimmy Butler III", "points": 118.0, "playerId": 6430}, {"name": "Franz Wagner", "points": 108.0, "playerId": 4566434}, {"name": "Cam Thomas", "points": 101.0, "playerId": 4432174}, {"name": "Immanuel Quickley", "points": 99.0, "playerId": 4395724}], "Shai-K47": [{"name": "Austin Reaves", "points": 195.0, "playerId": 4066457}, {"name": "Shai Gilgeous-Alexander", "points": 192.0, "playerId": 4278073}, {"name": "Tyrese Maxey", "points": 120.0, "playerId": 4431678}, {"name": "Ivica Zubac", "points": 97.0, "playerId": 4017837}, {"name": "Dylan Harper", "points": 86.0, "playerId": 5037871}], "Ay-ton of Drugs ": [{"name": "Donovan Mitchell", "points": 136.0, "playerId": 3908809}, {"name": "Nikola Jokic", "points": 114.0, "playerId": 3112335}, {"name": "Jrue Holiday", "points": 107.0, "playerId": 3995}, {"name": "Alperen Sengun", "points": 105.0, "playerId": 4871144}, {"name": "Collin Sexton", "points": 97.0, "playerId": 4277811}], "Its Not Delivery, Its Dejounte": [{"name": "Giannis Antetokounmpo", "points": 213.0, "playerId": 3032977}, {"name": "Julius Randle", "points": 146.0, "playerId": 3064514}, {"name": "Jalen Brunson", "points": 138.0, "playerId": 3934672}, {"name": "Alex Sarr", "points": 111.0, "playerId": 5160992}, {"name": "Jaylen Brown", "points": 108.0, "playerId": 3917376}], "Duren Duren": [{"name": "Scottie Barnes", "points": 146.0, "playerId": 4433134}, {"name": "Chet Holmgren", "points": 131.0, "playerId": 4433255}, {"name": "Anthony Edwards", "points": 105.0, "playerId": 4594268}, {"name": "Deni Avdija", "points": 102.0, "playerId": 4683021}, {"name": "Devin Booker", "points": 97.0, "playerId": 3136193}], "NBA WhiteBoy": [{"name": "Victor Wembanyama", "points": 247.0, "playerId": 5104157}, {"name": "LaMelo Ball", "points": 181.0, "playerId": 4432816}, {"name": "Aaron Gordon", "points": 118.0, "playerId": 3064290}, {"name": "Derrick White", "points": 117.0, "playerId": 3078576}, {"name": "Michael Porter Jr.", "points": 110.0, "playerId": 4278104}], "Honolulu Kawhi'i": [{"name": "James Harden", "points": 141.0, "playerId": 3992}, {"name": "Kawhi Leonard", "points": 124.0, "playerId": 6450}, {"name": "Malik Monk", "points": 113.0, "playerId": 4066262}, {"name": "Karl-Anthony Towns", "points": 109.0, "playerId": 3136195}, {"name": "Zion Williamson", "points": 102.0, "playerId": 4395628}], "APPLYING PASCALS": [{"name": "Luka Doncic", "points": 162.0, "playerId": 3945274}, {"name": "Pascal Siakam", "points": 146.0, "playerId": 3149673}, {"name": "DeMar DeRozan", "points": 124.0, "playerId": 3978}, {"name": "RJ Barrett", "points": 123.0, "playerId": 4395625}, {"name": "Nikola Vucevic", "points": 83.0, "playerId": 6478}]}, "2": {"bridges bridges and bridges": [{"name": "Stephen Curry", "points": 69.0, "playerId": 3975}, {"name": "Mikal Bridges", "points": 54.0, "playerId": 3147657}, {"name": "Trae Young", "points": 48.0, "playerId": 4277905}, {"name": "Jaime Jaquez Jr.", "points": 46.0, "playerId": 4432848}, {"name": "Onyeka Okongwu", "points": 43.0, "playerId": 4431680}], "Shai-K47": [{"name": "Tyrese Maxey", "points": 126.0, "playerId": 4431678}, {"name": "Shai Gilgeous-Alexander", "points": 103.0, "playerId": 4278073}, {"name": "Lauri Markkanen", "points": 71.0, "playerId": 4066336}, {"name": "Walker Kessler", "points": 60.0, "playerId": 4433136}, {"name": "Austin Reaves", "points": 56.0, "playerId": 4066457}], "Its Not Delivery, Its Dejounte": [{"name": "VJ Edgecombe", "points": 81.0, "playerId": 5124612}, {"name": "Giannis Antetokounmpo", "points": 71.0, "playerId": 3032977}, {"name": "Alex Sarr", "points": 64.0, "playerId": 5160992}, {"name": "Jamal Murray", "points": 58.0, "playerId": 3936299}, {"name": "Jalen Brunson", "points": 52.0, "playerId": 3934672}], "ALDAMA-LAMA-DINGDONGS": [{"name": "Evan Mobley", "points": 47.0, "playerId": 4432158}, {"name": "Ja Morant", "points": 35.0, "playerId": 4279888}, {"name": "Santi Aldama", "points": 35.0, "playerId": 4593125}, {"name": "Amen Thompson", "points": 35.0, "playerId": 4684740}, {"name": "Myles Turner", "points": 28.0, "playerId": 3133628}], "NBA WhiteBoy": [{"name": "Kelly Oubre Jr.", "points": 94.0, "playerId": 3133603}, {"name": "Quentin Grimes", "points": 73.0, "playerId": 4397014}, {"name": "Isaiah Hartenstein", "points": 67.0, "playerId": 4222252}, {"name": "Victor Wembanyama", "points": 53.0, "playerId": 5104157}, {"name": "Josh Giddey", "points": 43.0, "playerId": 4871145}], "Anthony Davis": [{"name": "Jimmy Butler III", "points": 72.0, "playerId": 6430}, {"name": "Ryan Rollins", "points": 56.0, "playerId": 4591725}, {"name": "Anthony Davis", "points": 50.0, "playerId": 6583}, {"name": "Keyonte George", "points": 47.0, "playerId": 4433627}, {"name": "Immanuel Quickley", "points": 46.0, "playerId": 4395724}], "APPLYING PASCALS": [{"name": "Aaron Wiggins", "points": 66.0, "playerId": 4397183}, {"name": "Nikola Vucevic", "points": 58.0, "playerId": 6478}, {"name": "Tari Eason", "points": 48.0, "playerId": 4433192}, {"name": "Deandre Ayton", "points": 35.0, "playerId": 4278129}, {"name": "Desmond Bane", "points": 34.0, "playerId": 4066320}], "Ay-ton of Drugs ": [{"name": "Nikola Jokic", "points": 78.0, "playerId": 3112335}, {"name": "Jrue Holiday", "points": 58.0, "playerId": 3995}, {"name": "Kyshawn George", "points": 54.0, "playerId": 5174563}, {"name": "Alperen Sengun", "points": 42.0, "playerId": 4871144}, {"name": "Donovan Mitchell", "points": 39.0, "playerId": 3908809}], "Honolulu Kawhi'i": [{"name": "Draymond Green", "points": 60.0, "playerId": 6589}, {"name": "Andrew Wiggins", "points": 43.0, "playerId": 3059319}, {"name": "Jarrett Allen", "points": 30.0, "playerId": 4066328}, {"name": "CJ McCollum", "points": 27.0, "playerId": 2490149}, {"name": "James Harden", "points": 26.0, "playerId": 3992}], "Duren Duren": [{"name": "Paolo Banchero", "points": 60.0, "playerId": 4432573}, {"name": "Devin Booker", "points": 57.0, "playerId": 3136193}, {"name": "Deni Avdija", "points": 51.0, "playerId": 4683021}, {"name": "Jabari Smith Jr.", "points": 25.0, "playerId": 4432639}, {"name": "Matas Buzelis", "points": 24.0, "playerId": 4711294}]}}};
        const marginData = {"labels": ["0-42", "42-84", "84-126", "126-168", "168-210", "210-253", "253-295", "295-337", "337-379", "379-421"], "counts": [2, 3, 1, 0, 1, 0, 2, 0, 0, 1]};
        const teamColors = {"NBA WhiteBoy": "#FF6384", "Its Not Delivery, Its Dejounte": "#36A2EB", "Duren Duren": "#FFCE56", "APPLYING PASCALS": "#4BC0C0", "ALDAMA-LAMA-DINGDONGS": "#9966FF", "Ay-ton of Drugs ": "#FF9F40", "Anthony Davis": "#FF6384", "bridges bridges and bridges": "#C9CBCF", "Honolulu Kawhi'i": "#4BC0C0", "Shai-K47": "#FF6384"};
        const teamLogos = {"NBA WhiteBoy": "https://i.redd.it/9gwy9lt732091.jpg", "Its Not Delivery, Its Dejounte": "https://g.espncdn.com/lm-static/logo-packs/fba/Jerseys-ESPN/fba-jerseys-07.svg", "Duren Duren": "https://g.espncdn.com/lm-static/fba/images/default_logos/20.svg", "APPLYING PASCALS": "https://g.espncdn.com/lm-static/fba/images/default_logos/1.svg", "ALDAMA-LAMA-DINGDONGS": "https://i1.sndcdn.com/avatars-000416422656-cgstbk-t500x500.jpg", "Ay-ton of Drugs ": "https://g.espncdn.com/lm-static/logo-packs/core/BobsBurgers/Bob_OnModel.svg", "Anthony Davis": "https://g.espncdn.com/lm-static/fba/images/default_logos/16.svg", "bridges bridges and bridges": "https://g.espncdn.com/lm-static/logo-packs/core/RalphBreaksTheInternet/ralph-11.svg", "Honolulu Kawhi'i": "https://g.espncdn.com/lm-static/fba/images/default_logos/3.svg", "Shai-K47": "https: // g.espncdn.com/lm-static/logo-packs/core/OldTimeMickeyAndFriends/Basketball_Mickey.svg"};

        // Chart.js default settings for dark theme
        Chart.defaults.color = '#e4e6eb';
        Chart.defaults.borderColor = '#2d3748';

        // Load team logo images
        const teamLogoImages = {};
        Object.keys(teamLogos).forEach(teamName => {
            if (teamLogos[teamName]) {
                const img = new Image(30, 30);
                img.src = teamLogos[teamName];
                teamLogoImages[teamName] = img;
            }
        });

        // 1. Weekly Total Points Line Chart
        const weeklyPointsCtx = document.getElementById('weeklyPointsChart').getContext('2d');
        const weeklyPointsChart = new Chart(weeklyPointsCtx, {
            type: 'line',
            data: {
                labels: weeklyScoresData.weeks.map(w => `Week ${w}`),
                datasets: Object.keys(weeklyScoresData.teams).map(teamName => {
                    const dataPoints = weeklyScoresData.teams[teamName];
                    const numPoints = dataPoints.length;

                    // Create pointStyle array - use logo for all points if available
                    let pointStyle = 'circle';
                    const pointRadii = Array(numPoints).fill(4);
                    const pointHoverRadii = Array(numPoints).fill(6);

                    if (teamLogoImages[teamName]) {
                        pointStyle = teamLogoImages[teamName];
                        pointRadii[numPoints - 1] = 15;
                        pointHoverRadii[numPoints - 1] = 18;
                    }

                    return {
                        label: '¬†¬†' + teamName,  // Add non-breaking spaces for margin
                        data: dataPoints,
                        borderColor: teamColors[teamName],
                        backgroundColor: teamColors[teamName] + '20',
                        borderWidth: 2,
                        tension: 0.3,
                        pointStyle: pointStyle,
                        pointRadius: pointRadii,
                        pointHoverRadius: pointHoverRadii
                    };
                })
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + ' pts';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#2d3748'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + ' pts';
                            }
                        }
                    },
                    x: {
                        grid: {
                            color: '#2d3748'
                        }
                    }
                }
            }
        });

        // 2. Cumulative Total Points Line Chart
        const cumulativePointsCtx = document.getElementById('cumulativePointsChart').getContext('2d');
        const cumulativePointsChart = new Chart(cumulativePointsCtx, {
            type: 'line',
            data: {
                labels: cumulativePointsData.weeks.map(w => `Week ${w}`),
                datasets: Object.keys(cumulativePointsData.teams).map(teamName => {
                    const dataPoints = cumulativePointsData.teams[teamName];
                    const numPoints = dataPoints.length;

                    // Create pointStyle array - use logo for all points if available
                    let pointStyle = 'circle';
                    const pointRadii = Array(numPoints).fill(4);
                    const pointHoverRadii = Array(numPoints).fill(6);

                    if (teamLogoImages[teamName]) {
                        pointStyle = teamLogoImages[teamName];
                        pointRadii[numPoints - 1] = 15;
                        pointHoverRadii[numPoints - 1] = 18;
                    }

                    return {
                        label: '¬†¬†' + teamName,  // Add non-breaking spaces for margin
                        data: dataPoints,
                        borderColor: teamColors[teamName],
                        backgroundColor: teamColors[teamName] + '20',
                        borderWidth: 2,
                        tension: 0.3,
                        pointStyle: pointStyle,
                        pointRadius: pointRadii,
                        pointHoverRadius: pointHoverRadii
                    };
                })
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: {
                            size: 14
                        },
                        bodyFont: {
                            size: 13
                        },
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + ' pts (total)';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#2d3748'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + ' pts';
                            }
                        },
                        title: {
                            display: true,
                            text: 'Cumulative Total Points'
                        }
                    },
                    x: {
                        grid: {
                            color: '#2d3748'
                        }
                    }
                }
            }
        });

        // 3. Standings Progression Step Chart
        const standingsCtx = document.getElementById('standingsChart').getContext('2d');
        const standingsChart = new Chart(standingsCtx, {
            type: 'line',
            data: {
                labels: standingsData.weeks.map(w => `Week ${w}`),
                datasets: Object.keys(standingsData.teams).map(teamName => {
                    const dataPoints = standingsData.teams[teamName];
                    const numPoints = dataPoints.length;

                    // Create pointStyle array - use logo for all points if available
                    let pointStyle = 'circle';
                    const pointRadii = Array(numPoints).fill(3);
                    const pointHoverRadii = Array(numPoints).fill(5);

                    if (teamLogoImages[teamName]) {
                        pointStyle = teamLogoImages[teamName];
                        pointRadii[numPoints - 1] = 15;
                        pointHoverRadii[numPoints - 1] = 18;
                    }

                    return {
                        label: '¬†¬†' + teamName,  // Add non-breaking spaces for margin
                        data: dataPoints,
                        borderColor: teamColors[teamName],
                        backgroundColor: teamColors[teamName] + '20',
                        borderWidth: 2,
                        stepped: true,
                        pointStyle: pointStyle,
                        pointRadius: pointRadii,
                        pointHoverRadius: pointHoverRadii
                    };
                })
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            padding: 15,
                            usePointStyle: true
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': Rank #' + context.parsed.y;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        reverse: true,
                        min: 1,
                        grid: {
                            color: '#2d3748'
                        },
                        ticks: {
                            stepSize: 1,
                            callback: function(value) {
                                return '#' + value;
                            }
                        },
                        title: {
                            display: true,
                            text: 'League Rank'
                        }
                    },
                    x: {
                        grid: {
                            color: '#2d3748'
                        }
                    }
                }
            }
        });

        // 4. Win Margin Distribution Histogram
        const marginCtx = document.getElementById('marginChart').getContext('2d');
        const marginChart = new Chart(marginCtx, {
            type: 'bar',
            data: {
                labels: marginData.labels,
                datasets: [{
                    label: 'Number of Matchups',
                    data: marginData.counts,
                    backgroundColor: '#4299e1',
                    borderColor: '#2b6cb0',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        callbacks: {
                            title: function(context) {
                                return 'Margin: ' + context[0].label + ' points';
                            },
                            label: function(context) {
                                return 'Matchups: ' + context.parsed.y;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: '#2d3748'
                        },
                        ticks: {
                            stepSize: 1
                        },
                        title: {
                            display: true,
                            text: 'Number of Matchups'
                        }
                    },
                    x: {
                        grid: {
                            color: '#2d3748'
                        },
                        title: {
                            display: true,
                            text: 'Point Margin Range'
                        }
                    }
                }
            }
        });

        // 5. Top Player Contributions with Images
        const latestWeek = playerContributions.weeks[playerContributions.weeks.length - 1];
        const latestContributions = playerContributions.contributions[latestWeek];

        function getPlayerImageUrl(playerId) {
            if (!playerId) return null;
            return `https://a.espncdn.com/combiner/i?img=/i/headshots/nba/players/full/${playerId}.png&w=426&h=320&cb=1`;
        }

        function getInitials(name) {
            const parts = name.split(' ');
            if (parts.length >= 2) {
                return parts[0][0] + parts[parts.length - 1][0];
            }
            return name.substring(0, 2).toUpperCase();
        }

        function renderPlayerContributions() {
            const grid = document.getElementById('playerContributionsGrid');
            const teams = Object.keys(latestContributions);

            // Calculate max points for scaling bars
            let maxPoints = 0;
            teams.forEach(team => {
                latestContributions[team].forEach(player => {
                    if (player.points > maxPoints) maxPoints = player.points;
                });
            });

            teams.forEach(team => {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';

                const teamTitle = document.createElement('h3');
                teamTitle.textContent = team;
                teamCard.appendChild(teamTitle);

                const players = latestContributions[team];
                players.forEach(player => {
                    const playerItem = document.createElement('div');
                    playerItem.className = 'player-item';

                    // Create image or fallback
                    const imageUrl = getPlayerImageUrl(player.playerId);
                    if (imageUrl) {
                        const img = document.createElement('img');
                        img.className = 'player-photo';
                        img.src = imageUrl;
                        img.alt = player.name;

                        // Fallback to initials if image fails to load
                        img.onerror = function() {
                            const fallback = document.createElement('div');
                            fallback.className = 'player-photo-error';
                            fallback.textContent = getInitials(player.name);
                            playerItem.replaceChild(fallback, img);
                        };

                        playerItem.appendChild(img);
                    } else {
                        const fallback = document.createElement('div');
                        fallback.className = 'player-photo-error';
                        fallback.textContent = getInitials(player.name);
                        playerItem.appendChild(fallback);
                    }

                    // Player info
                    const playerInfo = document.createElement('div');
                    playerInfo.className = 'player-info';

                    const playerName = document.createElement('div');
                    playerName.className = 'player-name';
                    playerName.textContent = player.name;
                    playerInfo.appendChild(playerName);

                    const pointsBar = document.createElement('div');
                    pointsBar.className = 'points-bar';
                    const barWidth = (player.points / maxPoints) * 100;
                    pointsBar.style.width = barWidth + '%';
                    playerInfo.appendChild(pointsBar);

                    playerItem.appendChild(playerInfo);

                    // Points display
                    const playerPoints = document.createElement('div');
                    playerPoints.className = 'player-points';
                    playerPoints.textContent = player.points.toFixed(1);
                    playerItem.appendChild(playerPoints);

                    teamCard.appendChild(playerItem);
                });

                grid.appendChild(teamCard);
            });
        }

        renderPlayerContributions();
    </script>
</body>
</html>
